import{d as A,u as R,C as u,_ as O,r as d,c as g,a as n,t as f,b as l,w as c,F as y,o as m,e as $,f as v,p as P,g as T,h as S,n as B,i as H,j as M,k as q,l as J,m as G,q as z,D as Q,P as X,L as Y}from"./vendor.b43d81af.js";const Z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}};Z();const ee=A("socket",{state:()=>({users:R("users",[]),user:null,targets:[],room:R("room",""),timerKick:60,timerRunning:!1,loc:window.location.host,trueLoc:"b100101475327a3aba840848569826e9",key:"ea3c3d286896235f3293dc525b45e032",unmaskKey:"",unmaskLoc:""}),getters:{getUsers(){return this.users}},actions:{init(e){this.user=e},connect(){},addUser(e){return this.users.length>=10||this.users.find(s=>s.username===e.username)?null:(this.users.push({username:e.username,password:e.password,status:"Disconnected",credits:0,hash:null,logged:!1,timer:0}),this.users.find(s=>s.username===e.username))},removeUser(e){let t=this.users.indexOf(e);this.users.splice(t,1)},addTarget(e){this.targets.find(s=>s.username===e.username)||this.targets.push({username:e.username,checked:!1})}}});function te(e){return new WebSocket("ws://gateway.miggi.id:2019?username="+e.username)}async function _(e,t){return u.AES.encrypt(e,u.enc.Utf8.parse(t),{mode:u.mode.ECB,padding:u.pad.Pkcs7}).ciphertext.toString(u.enc.Hex)}function w(e,t){const s=u.lib.CipherParams.create({ciphertext:u.enc.Hex.parse(e)});return u.AES.decrypt(s,u.enc.Utf8.parse(t),{mode:u.mode.ECB,padding:u.pad.Pkcs7}).toString(u.enc.Utf8)}function se(e,t,s,a){e.hash&&(s=w(s,e.hash));let i=JSON.parse(s);if(a.unmaskLoc===a.loc)switch(i.event){case"connection_established":e.hash=i.data.hash,e.status="Sending Hash",_(b(e,"login",{password:e.password}),e.hash).then(r=>{t.send(r)});break;case"system_error":e.status=i.data.message;break;case"login_success":e.username=i.data.username,e.credits=i.data.credits,e.status="Online",e.logged=!0,U(3e4,e,t);break;case"pong":e.status="Online";break;case"room_list":a.targets=[],i.data.users.forEach(r=>{a.targets.push({username:r.username,checked:!1})});break;case"message_event":i.data.message.includes("A vote to kick ")&&(a.timerRunning||(a.timerRunning=!0,setTimeout(()=>{V(a)},1e3)));break;case"system_notification":i.data.message==="credits"&&(e.credits=i.data.payload);break}}function b(e,t,s){let a={event:t,data:s};return JSON.stringify(a)}function U(e=3e4,t,s){s.readyState===WebSocket.OPEN&&_(b(t,"ping",{}),t.hash).then(a=>{s.send(a)}),t.timer=setTimeout(()=>{U(e,t,s)},e)}function V(e){e.timerKick<=0?(e.timerKick=60,e.timerRunning=!1):(e.timerKick--,setTimeout(()=>{V(e)},1e3))}const k=e=>(P("data-v-bb48b7e6"),e=e(),T(),e),ne={class:"container"},oe={class:"row justify-content-center"},ie={class:"mx-auto text-center col-lg-5"},re={class:"mt-5 mb-2"},ae={class:"text-lead"},le={class:"container pb-3"},ce={class:"row justify-content-center"},de={class:"mx-auto col-lg-9"},ue=k(()=>n("h6",null,"Setup Troops",-1)),me={class:"table-responsive fixed-container"},he={class:"table table-sm table-bordered table-striped mx-0"},pe=k(()=>n("thead",{class:"table-info text-center"},[n("tr",{class:"align-middle"},[n("th",{style:{width:"20%"},class:"text-uppercase"},"Username"),n("th",{style:{width:"45%"},class:"text-uppercase"},"Status"),n("th",{style:{width:"10%"},class:"text-uppercase"},"Credits"),n("th",{style:{width:"5%"}})])],-1)),fe={key:0},ge=k(()=>n("td",{colspan:"4",class:"text-center"},"No data",-1)),_e=[ge],be={class:"text-center"},ke={class:"align-middle text-center"},ye=["onClick"],ve={class:"d-grid gap-1 d-md-flex"},we={class:"d-grid gap-1 d-md-flex"},Se={type:"submit",class:"btn btn-primary",title:"Add troop"},Le={class:"mx-auto col-lg-3 col-sm-7 text-black"},Ee=k(()=>n("h6",null,"Target List",-1)),Ce={class:"table-responsive fixed-container"},xe=S(" No Data "),Ne={class:"d-grid gap-2 d-flex"},Re={class:"d-grid gap-2 d-flex"},$e={class:"col2 mt-auto"},Oe={class:"d-grid d-flex mt-2"},Pe={name:"MainWindow",created(){window.addEventListener("beforeunload",this.destroy),this.client.unmaskKey=w(this.client.key,this.belt).toString(),this.client.unmaskLoc=w(this.client.trueLoc,this.client.unmaskKey).toString()},data:function(){return{user:{username:"",password:"",status:"Disconnected",credits:0,hash:null,logged:!1},client:ee(),sockets:[],file:null}},methods:{addRow(e){if(e.preventDefault(),this.user.username.trim()===""||this.user.password.trim()===""||this.client.unmaskLoc!==this.client.loc)return;let t=this.user;t.username=t.username.trim().toLowerCase(),this.client.addUser(t),this.user.username="",this.user.password="",this.user.status="Disconnected",this.user.credits=0,this.user.hash=null,this.user.logged=!1},removeRow:function(e){this.closeSock(e),this.reset(e),this.client.removeUser(e)},clearUser(){this.logout(),this.client.users=[]},updateStatus:function(e,t){e.status=t},updateCredits:function(e,t){e.credits=t},selectTarget(e){e.checked=!e.checked},login(){this.client.users.length<1||this.client.unmaskLoc===this.client.loc&&(this.logout(),this.client.users.forEach(e=>{const t=te(e);t.addEventListener("open",()=>{this.updateStatus(e,"Connected")}),t.addEventListener("close",()=>{this.updateStatus(e,"Disconnected"),this.reset(e)}),t.addEventListener("message",s=>{se(e,t,s.data,this.client)}),t.addEventListener("ping",s=>{this.updateStatus(e,"Ping")}),t.addEventListener("pong",s=>{this.updateStatus(e,"Pong")}),t.addEventListener("heartbeat",s=>{this.updateStatus(e,"Online")}),this.sockets.push({user:e,sock:t})}))},logout(){this.sockets.length>0&&(this.sockets.forEach(e=>{e.sock.close(),this.reset(e.user)}),this.sockets=[])},getList(){if(!(this.client.room.trim()===""||this.sockets.length<1)){for(let e of this.sockets)if(e.sock.readyState===WebSocket.OPEN){_(b(e.user,"get_list",{roomname:this.client.room}),e.user.hash).then(t=>{e.sock.send(t)});break}}},joinRoom(){this.client.room.trim()===""||this.sockets.length<1||this.sockets.forEach(e=>{e.sock.readyState===WebSocket.OPEN&&_(b(e.user,"join_room",{roomname:this.client.room}),e.user.hash).then(t=>{e.sock.send(t)})})},leftRoom(){this.client.room.trim()===""||this.sockets.length<1||this.sockets.forEach(e=>{e.sock.readyState===WebSocket.OPEN&&_(b(e.user,"leave_room",{roomname:this.client.room}),e.user.hash).then(t=>{e.sock.send(t)})})},kickTarget(){this.client.room.trim()===""||this.sockets.length<1||this.client.targets.length<1||this.client.unmaskLoc===this.client.loc&&this.client.targets.forEach(e=>{e.checked&&this.sockets.forEach(t=>{t.sock.readyState===WebSocket.OPEN&&_(b(t.user,"kick_user",{roomname:this.client.room,username:e.username}),t.user.hash).then(s=>{t.sock.send(s)})})})},openFile(){let e=this.$refs.file.files[0];if(!e||e.type!=="text/plain"||this.client.unmaskLoc!==this.client.loc)return;let t=new FileReader;t.readAsText(e,"UTF-8"),t.onload=s=>{let i=s.target.result.split(/\r?\n/);this.clearUser(),i.forEach(r=>{r.includes(":")&&this.client.addUser({username:r.split(":")[0].trim().toLowerCase(),password:r.split(":")[1]})})},t.onerror=s=>{console.error(s)},this.$refs.file.value=""},reset(e){e.timer!==0&&clearTimeout(e.timer),e.status="Disconnected",e.logged=!1,e.hash=null,e.credits=0,e.timer=0},closeSock(e){this.sockets.length>0&&this.sockets.forEach(t=>{t.user.username===e.username&&t.sock.close()})},destroy(){this.sockets.forEach(e=>{e.sock.close(),this.reset(e.user)}),this.sockets=[]}}},Te=Object.assign(Pe,{props:{title:{type:String,required:!0},subtitle:{type:String,required:!0},belt:{type:String,required:!0}},setup(e){return(t,s)=>{const a=d("b-card-header"),i=d("delete-icon"),r=d("b-form-input"),p=d("plus-icon"),K=d("b-form"),E=d("b-card-body"),C=d("b-card-footer"),x=d("b-card"),N=d("b-list-group-item"),F=d("b-list-group"),D=d("list-icon"),I=d("b-row");return m(),g(y,null,[n("div",ne,[n("div",oe,[n("div",ie,[n("h1",re,f(e.title),1),n("p",ae,f(e.subtitle),1)])])]),n("div",le,[n("div",ce,[n("div",de,[l(x,{class:"mb-2"},{default:c(()=>[l(a,null,{default:c(()=>[ue]),_:1}),l(E,{class:"px-2"},{default:c(()=>[n("div",me,[n("table",he,[pe,n("tbody",null,[t.client.users.length===0?(m(),g("tr",fe,_e)):(m(!0),g(y,{key:1},$(t.client.users,o=>(m(),g("tr",{class:"align-middle",key:o},[n("td",null,f(o.username),1),n("td",be,f(o.status),1),n("td",null,f(o.credits),1),n("td",ke,[n("a",{href:"#",onClick:s[0]||(s[0]=()=>{}),class:"text-secondary font-weight-bold text-xs","data-toggle":"tooltip","data-original-title":"Edit user"},[n("button",{type:"button",class:"btn btn-danger",onClick:W=>t.removeRow(o)},[l(i)],8,ye)])])]))),128))])])]),l(K,{class:"d-grid g-2 gap-1 d-md-flex mt-2",onSubmit:t.addRow},{default:c(()=>[n("div",ve,[l(r,{id:"input-username",type:"text",name:"username",modelValue:t.user.username,"onUpdate:modelValue":s[1]||(s[1]=o=>t.user.username=o),class:"form-control",placeholder:"Username"},null,8,["modelValue"]),l(r,{id:"input-password",type:"text",name:"password",modelValue:t.user.password,"onUpdate:modelValue":s[2]||(s[2]=o=>t.user.password=o),class:"form-control",placeholder:"Password"},null,8,["modelValue"])]),n("div",we,[n("button",Se,[l(p)]),n("input",{type:"file",ref:"file",style:{display:"none"},accept:".txt, .ini",onChange:s[3]||(s[3]=(...o)=>t.openFile&&t.openFile(...o))},null,544),n("button",{onClick:s[4]||(s[4]=o=>t.$refs.file.click()),class:"btn btn-dark"},"Import from file"),n("button",{type:"button",class:"btn btn-danger",onClick:s[5]||(s[5]=(...o)=>t.clearUser&&t.clearUser(...o))}," Clear ")])]),_:1},8,["onSubmit"])]),_:1}),l(C,{class:"d-grid gap-2 d-md-flex justify-content-md-end align-items-center mt-auto pt-5"},{default:c(()=>[n("button",{type:"button",class:"btn btn-info",onClick:s[6]||(s[6]=(...o)=>t.login&&t.login(...o))},"Login"),n("button",{type:"button",class:"btn btn-warning",onClick:s[7]||(s[7]=(...o)=>t.logout&&t.logout(...o))},"Logout")]),_:1})]),_:1})]),n("div",Le,[l(x,null,{default:c(()=>[l(a,null,{default:c(()=>[Ee]),_:1}),l(E,{class:"px-2"},{default:c(()=>[n("div",Ce,[l(F,{class:"mx-0"},{default:c(()=>[t.client.targets.length===0?(m(),v(N,{key:0,disabled:"",class:"text-center"},{default:c(()=>[xe]),_:1})):(m(!0),g(y,{key:1},$(t.client.targets,o=>(m(),v(N,{key:o,class:B({active:o.checked===!0}),href:"javascript:void(null);",onClick:W=>t.selectTarget(o)},{default:c(()=>[S(f(o.username),1)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),l(I,{class:"align-content-stretch mt-2"},{default:c(()=>[n("div",Ne,[l(r,{type:"text",title:"Room Name",modelValue:t.client.room,"onUpdate:modelValue":s[8]||(s[8]=o=>t.client.room=o),class:"form-control",placeholder:"Room Name"},null,8,["modelValue"]),n("button",{type:"button",class:"btn btn-outline-danger g-4",onClick:s[9]||(s[9]=(...o)=>t.getList&&t.getList(...o)),title:"Get users list"},[l(D)])])]),_:1})]),_:1}),l(C,{class:"pb-0"},{default:c(()=>[n("div",Re,[n("button",{type:"button",class:"btn btn-outline-primary col-5",title:"Enter",onClick:s[10]||(s[10]=(...o)=>t.joinRoom&&t.joinRoom(...o))},"Enter "),n("h4",$e,f(t.client.timerKick),1),n("button",{type:"button",class:"btn btn-outline-primary col-5",title:"Enter",onClick:s[11]||(s[11]=(...o)=>t.leftRoom&&t.leftRoom(...o))},"Leave ")]),n("div",Oe,[n("button",{type:"button",class:"btn btn-danger col-12",title:"Kick",onClick:s[12]||(s[12]=(...o)=>t.kickTarget&&t.kickTarget(...o))}," Kick Selected Target ")])]),_:1})]),_:1})])])])],64)}}});var Ue=O(Te,[["__scopeId","data-v-bb48b7e6"]]);const Ve={setup(e){return(t,s)=>{const a=d("router-view");return m(),v(a)}}};const je={name:"NotFound"},L=e=>(P("data-v-db8b1d92"),e=e(),T(),e),Ke={id:"error-page"},Fe={class:"content text-center"},De=L(()=>n("h2",{class:"header","data-text":"404"}," 404 ",-1)),Ie=L(()=>n("h4",{"data-text":"Opps! Page not found"}," Opps! Page not found ",-1)),We=L(()=>n("p",null," Sorry, the page you're looking for doesn't exist. ",-1)),Ae={class:"btns"},Be=S("Return Home");function He(e,t,s,a,i,r){const p=d("RouterLink");return m(),g("div",Ke,[n("div",Fe,[De,Ie,We,n("div",Ae,[l(p,{to:"/"},{default:c(()=>[Be]),_:1})])])])}var Me=O(je,[["render",He],["__scopeId","data-v-db8b1d92"]]);const j=H({history:M("/"),routes:[{path:"/",name:"main",component:Ue,props:{title:"Miggi Kick!",subtitle:"Beta Version",belt:"gradient"}},{path:"/:pathMatch(.*)*",name:"NotFound",component:Me}]});const h=q(Ve),qe=J();h.use(qe);h.use(j);h.use(G);h.use(z,{config:{id:"G-HK5TTHS408"}},j);h.component("delete-icon",Q);h.component("plus-icon",X);h.component("list-icon",Y);h.mount("#app");
